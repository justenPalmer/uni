"use strict";!function(){var n={};window.uni=n,n.done=function(t){return t=t||{},t.pass||(t.pass=function(n){return n}),t.fail||(t.fail=function(t){n.fail(t)}),t},n.fail=function(){console.warn.apply(this,arguments)},n.type=function(n){if(void 0===n)return"und";if(null===n)return"null";if(n===!0||n===!1)return"bool";var t=typeof n;return"string"==t?"str":"number"==t?"num":"function"==t?"fun":"[object Array]"==Object.prototype.toString.call(n)?"ary":"obj"},n.ch=function(n){var t=0,i=[{pass:n}],r=function(n){if(!this.called)for(;t<i.length-1&&!this.called;)t++,i[t].pass&&("function"==typeof i[t].pass&&i[t].pass(n,{pass:r,fail:e}),this.called=!0)},e=function(n){if(!this.called)for(;t<i.length-1&&!this.called;)t++,i[t].fail&&("function"==typeof i[t].fail&&i[t].fail(n,{pass:r,fail:e}),this.called=!0)},a=function(){n({},{pass:r,fail:e})};setTimeout(a,1);var o=function(n){return i.push({pass:n}),this},f=function(n){return i.push({fail:n}),this},u=function(n){for(var t in n)if("function"==typeof n[t]&&"pass"==t||"fail"==t){var r={};"pass"==t?r.pass=n.pass:r[t]=n[t],i.push(r)}return this};return{pass:o,fail:f,done:u}},n.loop=function(t,i,r,e){e=e||{};var a,o=n.type(t),f=!1;void 0===e.i&&(e.i=0);var u=function(){if(f&&i){var o=e.i+1;return void i({i:e.i,prop:a,next:function(){e.i=o,n.loop(t,i,r,e)}})}r&&r()};if("ary"==o)e.len||(e.len=t.length),f=e.i<e.len,u();else if("obj"==o){var l=0;for(var s in t){if(l==e.i){a=s;break}l++}f=a?!0:!1,u()}else r&&r()}}(),function(){var n=uni.ent={},t=function(n,t,i){if("str"!==uni.type(t))return uni.fail("ent: mold is not a string");var r=void 0!==i&&null!==i?t+"~"+i:t;if(n._ent[r])return n._ent[r];var e={mold:t,signature:i,fingerprint:r,world:n};return n._ent[r]=e,e.act=function(n,t,i){if(i=uni.done(i),"str"!==uni.type(n))return i.fail("ent: act is not a string");if(void 0===uni._mold[e.mold])return i.fail("ent: mold "+e.mold+" not defined");var r=uni._mold[e.mold];if(r._act&&r._act[n])return r._act[n].apply(e,[t,i]);if(r._parents)for(var a=0,o=r._parents.length;o>a;a++){var f=r._parents[a];if(f._act[n])return f._act[n].apply(e,[t,i])}return i.fail("ent: mold "+e.mold+" action "+n+" not defined")},e.pact=function(n,t,i,r){if(r=uni.done(r),"str"!==uni.type(n))return r.fail("ent: parent is not a string");if("str"!==uni.type(t))return r.fail("ent: act is not a string");if(void 0===uni._mold[n])return r.fail("ent: mold "+e.mold+" not defined");var a=uni._mold[n];return a._act&&a._act[t]?a._act[t].apply(e,[i,r]):r.fail("ent: mold "+e.mold+" parent "+n+" action "+t+" not defined")},e._watchers={},e.watch=function(n,t,i){return n&&n.fingerprint?(e._watchers[t]=e._watchers[t]||{},void(e._watchers[t][n.fingerprint]=i)):uni.fail("ent.watch: no watcher or fingerprint defined")},e};n.fill=function(n){n._ent=n._ent||{},n.ent=function(i,r){return t(n,i,r)}}}(),function(){uni.mold=function(n){uni._mold=uni._mold||{};var t={};return uni._mold[n]=t,t._act={},t.act=function(n,i){t._act[n]=i},t.inherit=function(n){return uni._mold[n]?(t._parents=t._parents||[],void t._parents.unshift(uni._mold[n])):uni.fail("inherit: no mold found for:",n)},t.signal=function(n,t,i){if(n._watchers&&n._watchers[t])for(var r in n._watchers[t]){var e=uni.done();n._watchers[t][r](i,e)}},t}}(),function(){var n={};uni.world=n.world=function(){var n={};return uni.ent.fill(n),n}}();